<section class="sec" data-current="{{curr_page}}">
	<div class="container_full">
		<div class="init_padding">
			<div class="animate">
				<!-- <p class="page_no">Page {{curr_page+1}} of {{total_page}}</p> -->
				<h2>{{pageTitle}}</h2>
				<hr class="hr_width">
			</div>
			<div class="">
				<div class="animate">
					<div ng-repeat="item in text.p">
						<p ng-bind-html="item | to_trusted"></p>
					</div>
				</div>
				<!--<div ng-if="currentTopic.partial" ng-include="currentTopic.partial"></div>-->
				<div class="text-center animate">
					<iframe id="ifrm" onresize="resize(this)" class="no-border border-image" ng-if="currentTopic.partial" 
						style="max-width:{{currentTopic.partial.width}}px; max-height:{{currentTopic.partial.height}}px"
					    width="100%" height="{{currentTopic.partial.height}}" ng-src="{{currentTopic.partial.file}}"></iframe>
				</div>
				<img ng-src="{{image}}" ng-if="image" class="width_100 top_20 animate" alt="">
				<!-- <div class="bottom_nav default_delay">
					<button ng-click="next()" class="btn btn-round-radius btn_red">Next</button>
				</div> -->
			</div>
		</div>
	</div>
</section>

<script>
	$().ready(function () {
		animate();
		showNext(default_delay);
		var strWidth = $("#ifrm").css("maxWidth");
		var strHeight = $("#ifrm").css("maxHeight");
		var maxWidth = strWidth.substring(0, strWidth.length - 2);
		var maxHeight = strHeight.substring(0, strHeight.length - 2);


		$(window).resize(function () {
			setTimeout(function () {
				console.log(maxWidth, $(window).width());
				var width = $("#ifrm").width();
				var height = width * maxHeight / maxWidth;
				$("#ifrm").height(height - 20);
			}, 500)
		});
		$(window).resize()
	});
</script>